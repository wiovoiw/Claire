import string

# 定义凯撒密码函数，接受明文字符串s和位移值k作为参数
def kaisa(s, k):
    # 定义小写字母、大写字母和数字字符串
    string.ascii_uppercase 是 Python 标准库中 string 模块提供的一个字符串常量，
    它包含了所有大写英文字母的字符集合。具体来说，它包含了从 'A' 到 'Z' 的所有大写字母。
    string.ascii_lowercase 包含所有小写字母（a 到 z）
    string.digits 是 Python 标准库中 string 模块提供的一个字符串常量，
    它包含了所有的十进制数字字符。具体来说，它包含了从 '0' 到 '9' 的所有数字字符。

   ` lower = string.ascii_lowercase
    upper = string.ascii_uppercase
    num = string.digits`

    # 定义要加密或解密的字符集合，这里不包括标点符号
    before = string.ascii_letters + string.digits

    # 定义经过位移后的字符集合
这行代码定义了一个经过位移后的字符集合 after。让我解释它的构成部分：
upper[::-1]：这部分是 upper 变量，它包含了大写字母的字符集合， 使用 [::-1] 表示字符串的逆序，即将大写字母的字符集合逆序排列。
lower[::-1]：类似于上面，这部分是 lower 变量，包含小写字母的字符集合，也被逆序排列。
num[k:]：这部分是 num 变量，包含了数字字符的字符集合，但它从第 k 个字符开始截取到末尾。
num[:k]：同样是 num 变量，但它截取了从开头到第 k-1 个字符。
这个操作将大写字母、小写字母、以及数字字符集合重新排列，根据给定的位移 k，将它们的顺序改变。这在凯撒密码中是一个常见的操作，用于对字符进行位移加密和解密。
这段代码实际上构建了一个经过位移后的字符集合 after，其中包含大写字母、小写字母和数字字符。让我逐步解释它的构成：
upper[::-1]：这部分是大写字母的字符集合，通过 [::-1] 将其逆序排列。例如，原本的字符集合是 "ABCDEFGHIJKLMNOPQRSTUVWXYZ"，逆序后变成 "ZYXWVUTSRQPONMLKJIHGFEDCBA"。

lower[::-1]：类似于上面，这部分是小写字母的字符集合，也被逆序排列。原本的字符集合是 "abcdefghijklmnopqrstuvwxyz"，逆序后变成 "zyxwvutsrqponmlkjihgfedcba"。

num[k:]：这部分是数字字符的字符集合，但它从第 k 个数字字符开始截取到末尾。例如，如果 k = 3，那么原本的字符集合 "0123456789" 就会被截取为 "3456789"。

num[:k]：同样是数字字符的字符集合，但它截取了从开头到第 k-1 个数字字符。例如，如果 k = 3，那么原本的字符集合 "0123456789" 就会被截取为 "012"。

综合起来，这个操作将大写字母、小写字母和数字字符的集合重新排列，根据给定的位移 k，将它们的顺序改变。这种操作通常用于加密和解密过程中，允许对字符进行位移操作，以实现安全通信或数据保护。在这个特定的代码中，它用于实现凯撒密码的加密和解密功能。


    afrte = upper[::-1] + lower[::-1] + num[k:] + num[:k]

    # 创建字符映射表，将before中的字符映射到after中的字符
这行代码创建了一个字符映射表 table，用于将 before 中的字符映射到 after 中的字符。这是通过 str.maketrans() 方法完成的，其中：
before 是源字符集合，即需要被映射的字符集合。
after 是目标字符集合，即源字符集合中的字符将被映射到的字符集合。
映射表 table 用于存储这种字符之间的映射关系，之后可以使用 str.translate() 方法将文本中的字符根据这个映射表进行替换。
在这个特定的代码中，before 包含了字母和数字的字符集合，而 after 包含了经过位移变换后的字符集合。这就允许你使用 table 将文本进行凯撒密码的加密和解密。


    # 使用映射表对输入字符串s进行加密或解密，并返回结果
    return s.translate(table)
    table = ' '.maketrans(before, after)


k 的位移改变了字符的顺序。具体地说，它通过位移操作重新排列了字符集合 before 中的字符，产生了加密后的字符集合 after。
在凯撒密码中，位移 k 决定了字符的位置如何改变。如果 k 是正整数，字符集合将向右（正方向）移动 k 个位置。
如果 k 是负整数，字符集合将向左（逆方向）移动 k 个位置。这就是字符位移的概念。
例如，假设 k 为 3，且明文字符集合为 "abcdefghijklmnopqrstuvwxyz"。
通过将每个字符向右位移 3 个位置，就得到了加密后的字符集合 "defghijklmnopqrstuvwxyzabc".
这个位移操作改变了字符的顺序，从而实现了加密。同样的，如果将每个字符向左位移 3 个位置，就可以将密文解密为原始明文。
所以，k 的位移改变了字符的排列顺序，用于加密和解密明文。这是凯撒密码的核心原理。

# 从用户输入获取明文消息
s = input("请输入明文：")

# 从用户输入获取位移值并将其转换为整数
k = int(input("请输入位移："))

# 调用kaisa函数进行加密操作，将结果保存在aa变量中
aa = kaisa(s, k)

# 调用kaisa函数进行解密操作，将结果保存在bb变量中
bb = kaisa(aa, -k)

# 打印加密后的消息
result_1 = print("加密后：" + aa)

# 打印解密后的消息
result_2 = print("解密后：" + bb)
